# **GRANT and REVOKE in SQL**

## üîç **Overview**

`GRANT` and `REVOKE` are **Data Control Language (DCL)** commands in SQL used to **manage access permissions** for database users and roles.

They play a **critical role** in database **security and access control**, ensuring that only authorized users can view or modify data.

| Command    | Purpose                                                        |
| ---------- | -------------------------------------------------------------- |
| **GRANT**  | Used to **assign privileges** (permissions) to a user or role. |
| **REVOKE** | Used to **remove privileges** that were previously granted.    |

---

## üß† **Why Are GRANT and REVOKE Important?**

1. **Security:** Protect sensitive data by controlling who can access or modify it.
2. **Access Management:** Assign different privileges based on user roles (e.g., admin, analyst, guest).
3. **Least Privilege Principle:** Users get only the access they _need_, reducing potential misuse.
4. **Accountability:** Allows tracking and limiting who can perform what actions on which data.

---

## üß© **1. GRANT Command**

### üîπ **Definition**

The `GRANT` command is used to give specific **privileges** to one or more users or roles on particular database objects (like tables, views, or databases).

### üîπ **Syntax**

```sql
GRANT privilege_list
ON object_name
TO user_or_role
[WITH GRANT OPTION];
```

### üîπ **Parameters Explained**

| Keyword               | Description                                                                 |
| --------------------- | --------------------------------------------------------------------------- |
| **privilege_list**    | One or more privileges such as `SELECT`, `INSERT`, `UPDATE`, `DELETE`, etc. |
| **object_name**       | The name of the database object (e.g., table, view, schema).                |
| **TO**                | Specifies the user or role receiving the privilege.                         |
| **WITH GRANT OPTION** | Allows the user to further grant those privileges to others.                |

---

### üîπ **Common Privileges**

| Privilege          | Description                                         |
| ------------------ | --------------------------------------------------- |
| **SELECT**         | Allows user to read data from a table or view.      |
| **INSERT**         | Allows user to insert new records.                  |
| **UPDATE**         | Allows user to modify existing records.             |
| **DELETE**         | Allows user to remove records.                      |
| **ALL PRIVILEGES** | Grants all available permissions on the object.     |
| **EXECUTE**        | Allows execution of stored procedures or functions. |
| **CREATE**         | Allows creation of new tables, views, or databases. |

---

### üîπ **Examples**

#### 1. Granting basic privileges

```sql
GRANT SELECT, INSERT
ON school.students
TO 'data_entry_user'@'localhost';
```

‚úÖ This allows `data_entry_user` to **read** and **insert** records into the `students` table.

---

#### 2. Granting all privileges

```sql
GRANT ALL PRIVILEGES
ON school.*
TO 'admin_user'@'localhost';
```

‚úÖ Gives `admin_user` full control over all tables in the `school` database.

---

#### 3. Granting privileges with GRANT OPTION

```sql
GRANT SELECT, UPDATE
ON accounts
TO 'manager'@'localhost'
WITH GRANT OPTION;
```

‚úÖ `manager` can now **perform SELECT and UPDATE** and also **grant those permissions** to other users.

---

#### 4. Granting to multiple users

```sql
GRANT SELECT
ON sales.orders
TO 'report_user1'@'localhost', 'report_user2'@'localhost';
```

‚úÖ Both `report_user1` and `report_user2` can read data from `sales.orders`.

---

### üîπ **Note:**

If you want to **grant privileges globally** (on all databases), you can use:

```sql
GRANT ALL PRIVILEGES ON *.* TO 'admin'@'localhost';
```

This gives privileges across **all databases and tables**.

---

## üß© **2. REVOKE Command**

### üîπ **Definition**

The `REVOKE` command is used to **remove privileges** that were previously granted to a user or role.

### üîπ **Syntax**

```sql
REVOKE privilege_list
ON object_name
FROM user_or_role;
```

### üîπ **Parameters**

| Keyword            | Description                                            |
| ------------------ | ------------------------------------------------------ |
| **privilege_list** | The specific privileges to remove.                     |
| **object_name**    | The database object affected (table, view, etc.).      |
| **FROM**           | Specifies the user(s) or role(s) losing the privilege. |

---

### üîπ **Examples**

#### 1. Revoking a single privilege

```sql
REVOKE INSERT
ON school.students
FROM 'data_entry_user'@'localhost';
```

‚úÖ Removes the ability for `data_entry_user` to insert new records in `students`.

---

#### 2. Revoking multiple privileges

```sql
REVOKE SELECT, UPDATE
ON accounts
FROM 'manager'@'localhost';
```

‚úÖ Removes both read and update permissions from `manager`.

---

#### 3. Revoking all privileges

```sql
REVOKE ALL PRIVILEGES
ON school.*
FROM 'admin_user'@'localhost';
```

‚úÖ Removes all access for `admin_user` to all objects in the `school` database.

---

#### 4. Revoking privileges globally

```sql
REVOKE ALL PRIVILEGES, GRANT OPTION FROM 'user1'@'localhost';
```

‚úÖ Removes all privileges from `user1` at the global level.

---

## ‚öñÔ∏è **3. WITH GRANT OPTION Explained**

When you grant privileges using the **`WITH GRANT OPTION`**, it means the user can **pass those privileges to others**.

Example:

```sql
GRANT SELECT ON employees TO 'manager'@'localhost' WITH GRANT OPTION;
```

-   `manager` can **select** data from `employees`.
-   `manager` can also **grant SELECT privilege** on `employees` to others.

If you later revoke that privilege from `manager`, any privileges they granted to others are also revoked.

---

## üß© **4. GRANT vs REVOKE ‚Äî Comparison Table**

| Feature             | GRANT                                          | REVOKE                                  |
| ------------------- | ---------------------------------------------- | --------------------------------------- |
| **Purpose**         | To give specific privileges to users or roles. | To remove previously given privileges.  |
| **Syntax Keyword**  | `TO`                                           | `FROM`                                  |
| **Example**         | `GRANT SELECT ON students TO user1;`           | `REVOKE SELECT ON students FROM user1;` |
| **Affects Access?** | Increases access.                              | Restricts or removes access.            |
| **Used For**        | Assigning new users or expanding permissions.  | Tightening security or revoking access. |

---

## üß† **5. Best Practices for Using GRANT and REVOKE**

1. **Follow the Principle of Least Privilege**

    - Only grant the permissions users absolutely need.
    - Example: A data entry operator only needs `INSERT`, not `DELETE`.

2. **Avoid Using ALL PRIVILEGES for Non-Admin Users**

    - It can lead to unintentional misuse of data.

3. **Use Roles for Group Permissions**

    - Instead of granting privileges to each user individually, create roles.

    ```sql
    CREATE ROLE data_entry;
    GRANT INSERT, SELECT ON students TO data_entry;
    GRANT data_entry TO 'ronin'@'localhost';
    ```

4. **Regularly Audit User Privileges**

    - Periodically check which users have access to sensitive tables.

    ```sql
    SHOW GRANTS FOR 'ronin'@'localhost';
    ```

5. **Revoke Access When Employees Leave or Roles Change**

    - Immediately remove privileges to prevent data misuse.

6. **Be Cautious with WITH GRANT OPTION**

    - Only use it when necessary (e.g., for managers or admins).

7. **Use Strong Authentication**

    - Combine GRANT/REVOKE with password policies and SSL/TLS encryption.

---

## üîç **6. Example Workflow**

### Step 1: Create a new user

```sql
CREATE USER 'john'@'localhost' IDENTIFIED BY 'John#1234';
```

### Step 2: Grant privileges

```sql
GRANT SELECT, INSERT ON company.employees TO 'john'@'localhost';
```

### Step 3: Check granted privileges

```sql
SHOW GRANTS FOR 'john'@'localhost';
```

### Step 4: Revoke privileges when not needed

```sql
REVOKE INSERT ON company.employees FROM 'john'@'localhost';
```

‚úÖ Now `john` can only **read** data but can no longer **insert** new records.

---

## üß© **7. Supported Privileges by Object Type (MySQL Example)**

| Object Type                      | Example Privileges                         |
| -------------------------------- | ------------------------------------------ |
| **Database**                     | CREATE, DROP, ALTER, ALL PRIVILEGES        |
| **Table**                        | SELECT, INSERT, UPDATE, DELETE, REFERENCES |
| **Column**                       | SELECT(column_name), UPDATE(column_name)   |
| **Routine (Procedure/Function)** | EXECUTE, ALTER ROUTINE                     |
| **Global (Server level)**        | SUPER, SHUTDOWN, RELOAD                    |

---

## üßæ **8. Summary**

| Command               | Function                        | Used For                  | Example                                               |
| --------------------- | ------------------------------- | ------------------------- | ----------------------------------------------------- |
| **GRANT**             | Assign privileges               | Giving access             | `GRANT SELECT ON students TO user1;`                  |
| **REVOKE**            | Remove privileges               | Restricting access        | `REVOKE SELECT ON students FROM user1;`               |
| **WITH GRANT OPTION** | Allow re-granting of privileges | Delegation of permissions | `GRANT SELECT ON table TO manager WITH GRANT OPTION;` |
| **SHOW GRANTS**       | View user permissions           | Auditing                  | `SHOW GRANTS FOR user1;`                              |

---

## ‚úÖ **Conclusion**

`GRANT` and `REVOKE` are the **core of SQL access control** and a vital part of **database security management**.
They enable database administrators to:

-   **Control user privileges** precisely,
-   **Enforce least privilege**, and
-   **Protect sensitive data** from unauthorized access or modification.

Together, they ensure a secure, well-governed, and accountable database environment.
