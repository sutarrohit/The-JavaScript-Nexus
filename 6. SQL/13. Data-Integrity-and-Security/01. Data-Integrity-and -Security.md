## ðŸ§© **1. Data Integrity and Security Overview**

Data integrity and security in SQL are two **fundamental pillars** of database management:

| Concept            | Meaning                                                                                    |
| ------------------ | ------------------------------------------------------------------------------------------ |
| **Data Integrity** | Ensures that the data in the database is **accurate, consistent, and valid** at all times. |
| **Data Security**  | Protects the data from **unauthorized access, modification, or loss**.                     |

Together, they ensure the database remains **trustworthy** and **safe** for users and applications.

---

## ðŸ§± **2. Data Integrity**

Data integrity ensures that **only valid and correct data** is entered into the database and remains consistent throughout its lifecycle.

### ðŸ”¹ Integrity is maintained through:

1. **Constraints**
2. **Transactions**
3. **Normalization**
4. **Referential Integrity**

Letâ€™s focus first on **constraints**, which are the foundation of data integrity.

---

## âš™ï¸ **3. SQL Data Integrity Constraints**

SQL **constraints** are rules enforced on data columns in a table.
They prevent invalid data entry and ensure consistency between related tables.

There are **two types** of constraints:

| Type                        | Description                                                          |
| --------------------------- | -------------------------------------------------------------------- |
| **Column-level constraint** | Applies to a single column (declared next to the column definition). |
| **Table-level constraint**  | Applies to the entire table (declared after all columns).            |

Example:

```sql
CREATE TABLE students (
    student_id INT PRIMARY KEY,                 -- column-level constraint
    name VARCHAR(100) NOT NULL,                 -- column-level constraint
    age INT CHECK (age >= 5),                   -- column-level constraint
    email VARCHAR(100) UNIQUE,                  -- column-level constraint
    class_id INT,
    FOREIGN KEY (class_id) REFERENCES classes(class_id)  -- table-level constraint
);
```

---

### ðŸ§© **Types of Constraints**

| Constraint      | Purpose                                                           | Example                                               |
| --------------- | ----------------------------------------------------------------- | ----------------------------------------------------- |
| **NOT NULL**    | Ensures a column cannot have NULL (missing) values.               | `name VARCHAR(50) NOT NULL`                           |
| **UNIQUE**      | Ensures all values in a column are different (no duplicates).     | `email VARCHAR(100) UNIQUE`                           |
| **PRIMARY KEY** | Uniquely identifies each record (combines `UNIQUE` + `NOT NULL`). | `PRIMARY KEY(student_id)`                             |
| **FOREIGN KEY** | Enforces referential integrity between two tables.                | `FOREIGN KEY (class_id) REFERENCES classes(class_id)` |
| **CHECK**       | Ensures that values meet a specific condition.                    | `CHECK (age >= 5 AND age <= 18)`                      |
| **DEFAULT**     | Provides a default value if none is specified during insertion.   | `status VARCHAR(10) DEFAULT 'active'`                 |

---

### ðŸ§  **Why Constraints Are Important**

-   Prevent invalid or inconsistent data.
-   Protect relationships between tables.
-   Reduce manual error checking.
-   Help the database enforce rules automatically.

Example:

```sql
INSERT INTO students (student_id, name, age)
VALUES (1, 'Ronin', 2);
```

ðŸ’¥ This will fail if thereâ€™s a `CHECK (age >= 5)` constraint â€” maintaining data integrity automatically.

---

## ðŸ”„ **4. Data Consistency via Transactions**

Even with constraints, **data integrity** also depends on **transactions** â€” logical units of work that either succeed completely or fail completely.

-   A **transaction** groups multiple SQL statements.
-   It ensures the **ACID** properties:

    -   **A**tomicity â€“ All or nothing
    -   **C**onsistency â€“ Data remains valid before and after
    -   **I**solation â€“ Transactions donâ€™t interfere with each other
    -   **D**urability â€“ Changes persist after commit

Example:

```sql
BEGIN TRANSACTION;

UPDATE accounts SET balance = balance - 500 WHERE account_id = 1;
UPDATE accounts SET balance = balance + 500 WHERE account_id = 2;

COMMIT;  -- All changes saved if successful
-- ROLLBACK;  -- Undo all changes if any step fails
```

This prevents partial updates that could make data inconsistent.

---

## ðŸ”’ **5. Data Security**

Now that integrity ensures _correctness_, **security** ensures _protection_.
SQL provides several mechanisms to secure databases:

---

### **A. Authentication**

Ensures only **authorized users** can access the database.

-   Managed by the **DBMS** (e.g., MySQL, PostgreSQL).
-   Users log in using **username/password** or **other credentials**.

Example (MySQL):

```sql
CREATE USER 'ronin'@'localhost' IDENTIFIED BY 'securePass123';
```

---

### **B. Authorization**

Determines **what actions** a user can perform (read, write, delete, etc.).

Example:

```sql
GRANT SELECT, INSERT ON school.students TO 'ronin'@'localhost';
REVOKE DELETE ON school.students FROM 'ronin'@'localhost';
```

This prevents unauthorized operations on sensitive tables.

---

### **C. Data Encryption**

Encrypts data to protect it from being read by unauthorized users.

1. **At-rest encryption:** Secures files stored on disk.
2. **In-transit encryption:** Secures data traveling over the network (e.g., SSL/TLS).

Example (MySQL):

```sql
ALTER TABLE students MODIFY email VARBINARY(255);
```

Or encrypt at application level using AES.

---

### **D. Database Backup and Recovery**

Regular backups protect against:

-   Data loss (due to failure)
-   Accidental deletions
-   Corruption

Example:

```bash
mysqldump -u root -p school > school_backup.sql
```

---

### **E. Auditing and Logging**

Keep track of **who accessed what** and **what changes were made**.

-   Helps detect malicious activity.
-   Ensures accountability and compliance.

---

## ðŸ§  **6. Summary Table**

| Aspect             | Description                                        | Example                                   |
| ------------------ | -------------------------------------------------- | ----------------------------------------- |
| **Data Integrity** | Ensures correctness and consistency of data.       | Constraints, Transactions                 |
| **Data Security**  | Protects data from unauthorized access or damage.  | Authentication, Authorization, Encryption |
| **Constraints**    | Rules to restrict invalid data.                    | PRIMARY KEY, CHECK, FOREIGN KEY           |
| **Transactions**   | Maintain consistency during multi-step operations. | COMMIT / ROLLBACK                         |
| **Backup**         | Protects data from loss.                           | mysqldump                                 |
| **Encryption**     | Keeps sensitive data private.                      | AES, TLS                                  |

---

### âœ… **In Short:**

> **Data Integrity** = Ensuring data is _correct and consistent._ > **Data Security** = Ensuring data is _safe and private._

Both are **essential** for building reliable, trustworthy database systems.
