# ðŸ“˜ **SQL Conditional Functions â€” Detailed Notes**

SQL conditional expressions allow you to **apply logic and control flow** inside your SQL queries.
They work similarly to `if-else` statements in programming â€” helping you:

-   Handle missing or `NULL` values
-   Compare expressions
-   Derive computed columns
-   Control query output dynamically

---

## ðŸ”¹ **1. CASE Expression**

### ðŸ§  **Definition**

`CASE` works like an **if-else** statement in SQL.
It checks conditions in order and returns a value based on the first condition that is true.

### ðŸ§® **Syntax**

```sql
CASE
    WHEN condition1 THEN result1
    WHEN condition2 THEN result2
    ...
    ELSE default_result
END
```

### ðŸ’¡ **Example 1 â€” Basic CASE**

```sql
SELECT
  student_name,
  marks,
  CASE
    WHEN marks >= 90 THEN 'A'
    WHEN marks >= 75 THEN 'B'
    WHEN marks >= 60 THEN 'C'
    ELSE 'Fail'
  END AS grade
FROM students;
```

### ðŸ“Š **Output**

| student_name | marks | grade |
| ------------ | ----- | ----- |
| Raj          | 92    | A     |
| Tina         | 78    | B     |
| Rahul        | 55    | Fail  |

### ðŸ’¡ **Example 2 â€” CASE in ORDER BY**

```sql
SELECT student_name, marks
FROM students
ORDER BY
  CASE
    WHEN marks >= 60 THEN 1
    ELSE 2
  END;
```

âž¡ Students with marks â‰¥ 60 will appear first.

---

## ðŸ”¹ **2. NULLIF() â€” Returns NULL if Two Values Are Equal**

### ðŸ§  **Definition**

`NULLIF()` compares two expressions.
If they are **equal**, it returns `NULL`; otherwise, it returns the **first expression**.

### ðŸ§® **Syntax**

```sql
NULLIF(expr1, expr2)
```

### ðŸ’¡ **Example**

```sql
SELECT NULLIF(10, 10) AS Result1,   -- equal â†’ returns NULL
       NULLIF(10, 20) AS Result2;   -- not equal â†’ returns 10
```

### ðŸ“Š **Output**

| Result1 | Result2 |
| ------- | ------- |
| NULL    | 10      |

### âœ… **Use Case**

-   Avoid division by zero errors:

```sql
SELECT total_amount / NULLIF(total_items, 0) AS avg_price
FROM orders;
```

If `total_items = 0`, `NULLIF(total_items, 0)` returns `NULL` â†’ prevents divide-by-zero error.

---

## ðŸ”¹ **3. COALESCE() â€” Returns First Non-NULL Value**

### ðŸ§  **Definition**

`COALESCE()` returns the **first non-NULL** value from a list of expressions.
Itâ€™s often used for **handling missing (NULL) data** or providing **default values**.

### ðŸ§® **Syntax**

```sql
COALESCE(expr1, expr2, expr3, ..., exprN)
```

### ðŸ’¡ **Example**

```sql
SELECT
  COALESCE(phone_number, alternate_number, 'No contact') AS Contact
FROM customers;
```

### ðŸ“Š **Output**

| phone_number | alternate_number | Contact    |
| ------------ | ---------------- | ---------- |
| 9876543210   | NULL             | 9876543210 |
| NULL         | 9123456789       | 9123456789 |
| NULL         | NULL             | No contact |

### âœ… **Use Case**

-   Replacing NULL values with meaningful defaults:

```sql
SELECT COALESCE(address, 'Address not provided') FROM users;
```

---

## ðŸ” **CASE vs NULLIF vs COALESCE â€” Quick Comparison**

| Function            | Purpose                      | Returns                   | Example                                          |
| ------------------- | ---------------------------- | ------------------------- | ------------------------------------------------ |
| `CASE`              | Apply conditional logic      | Value based on condition  | `CASE WHEN marks>50 THEN 'Pass' ELSE 'Fail' END` |
| `NULLIF(a, b)`      | Returns NULL if `a = b`      | NULL or first value       | `NULLIF(10, 10) â†’ NULL`                          |
| `COALESCE(a, b, c)` | Returns first non-NULL value | First non-NULL expression | `COALESCE(NULL, 'Hello', 'Hi') â†’ 'Hello'`        |

---

## ðŸ’¡ **Practical Example â€” All Combined**

Suppose we have a table:

```sql
CREATE TABLE orders (
  order_id INT,
  customer_name VARCHAR(50),
  discount INT,
  total_amount DECIMAL(10,2)
);

INSERT INTO orders VALUES
(1, 'Alice', 10, 500),
(2, 'Bob', NULL, 300),
(3, 'Charlie', 0, 200);
```

### âœ… **Query Using All Three**

```sql
SELECT
  order_id,
  customer_name,

  -- COALESCE: Replace NULL discount with 0
  COALESCE(discount, 0) AS discount_value,

  -- NULLIF: Avoid division by zero if discount is 0
  total_amount / NULLIF(discount, 0) AS discount_ratio,

  -- CASE: Display discount type
  CASE
    WHEN discount IS NULL THEN 'No Discount'
    WHEN discount = 0 THEN 'Zero Discount'
    WHEN discount >= 10 THEN 'High Discount'
    ELSE 'Normal Discount'
  END AS discount_category

FROM orders;
```

### ðŸ“Š **Output**

| order_id | customer_name | discount_value | discount_ratio | discount_category |
| -------- | ------------- | -------------- | -------------- | ----------------- |
| 1        | Alice         | 10             | 50.00          | High Discount     |
| 2        | Bob           | 0              | NULL           | No Discount       |
| 3        | Charlie       | 0              | NULL           | Zero Discount     |

---

## ðŸ§¾ **Summary Table**

| Function            | Description                      | Example                                 | Result   |
| ------------------- | -------------------------------- | --------------------------------------- | -------- |
| `CASE`              | Conditional logic (like IF-ELSE) | `CASE WHEN salary>5000 THEN 'High' END` | `'High'` |
| `NULLIF(a, b)`      | Returns NULL if `a` equals `b`   | `NULLIF(10, 10)`                        | `NULL`   |
| `COALESCE(a, b, c)` | Returns first non-NULL value     | `COALESCE(NULL, 5, 10)`                 | `5`      |

---

âœ… **Tip:**

-   Use **`COALESCE()`** for replacing `NULL`s (data cleaning).
-   Use **`NULLIF()`** to prevent divide-by-zero.
-   Use **`CASE`** for complex multi-condition logic.
