# ğŸ“˜ `useDeferredValue`

## 1. **What is `useDeferredValue`?**

-   `useDeferredValue` is a React hook introduced in **React 18** as part of **Concurrent Rendering**.
-   It lets you **defer (delay) updating a value** so React can prioritize more urgent updates (like user typing, clicks, animations).
-   In other words â†’ it creates a **â€œlagging versionâ€** of a value.

---

## 2. **Syntax**

```tsx
const deferredValue = useDeferredValue(value);
```

### Arguments

-   `value` â†’ The value you want to defer (usually from `useState`).

### Returns

-   `deferredValue` â†’ A version of `value` that updates **later**, giving priority to urgent updates.

---

## 3. **When to use `useDeferredValue`**

-   When you want to **keep UI responsive** during expensive updates.
-   Common scenario: **Search bar with large list filtering**.

    -   User types fast â†’ input updates immediately.
    -   List filtering happens with a deferred value (slightly delayed).

-   Helps avoid **laggy UI** when expensive computations are triggered by state changes.

---

## 4. **Example (Search Filtering)**

```tsx
import React, { useState, useDeferredValue } from "react";

export default function SearchExample() {
    const [query, setQuery] = useState("");
    const deferredQuery = useDeferredValue(query); // ğŸ‘ˆ delayed version

    const bigList = Array.from({ length: 10000 }, (_, i) => `Item ${i}`);
    const filteredList = bigList.filter((item) => item.toLowerCase().includes(deferredQuery.toLowerCase()));

    return (
        <div>
            <input type='text' value={query} onChange={(e) => setQuery(e.target.value)} placeholder='Search...' />

            <p>Immediate input: {query}</p>
            <p>Deferred input (for filtering): {deferredQuery}</p>

            <ul>
                {filteredList.map((item) => (
                    <li key={item}>{item}</li>
                ))}
            </ul>
        </div>
    );
}
```

### How this helps

-   Typing in the input feels smooth (urgent update).
-   Filtering the huge list is delayed (non-urgent update).

---

## 5. **How it works internally**

1. React marks updates caused by `useDeferredValue` as **low priority**.
2. Urgent updates (like typing) are processed first.
3. Deferred updates (like filtering) run after urgent work is done.
4. This prevents the UI from being blocked by expensive renders.

---

## 6. **Comparison with Similar Hooks**

| Hook               | Purpose                                                                |
| ------------------ | ---------------------------------------------------------------------- |
| `useTransition`    | Wrap state updates to make them **low priority**.                      |
| `useDeferredValue` | Create a **lagging version** of a value, automatically lower priority. |
| `useMemo`          | Memoize expensive computation, but doesnâ€™t manage priority.            |

ğŸ‘‰ Think of it like this:

-   `useTransition` = â€œIâ€™ll tell React which updates are low priority.â€
-   `useDeferredValue` = â€œReact, you decide when to update this value.â€

---

## 7. **Key Benefits**

âœ… Keeps input fields smooth and responsive.
âœ… Useful for **search + filtering, sorting, rendering big lists**.
âœ… No need to manually throttle/debounce in some cases.
âœ… Works seamlessly with **Concurrent Rendering**.

---

## 8. **Limitations**

âš ï¸ Not a replacement for **debounce/throttle** in all cases (API calls still need debounce).
âš ï¸ Deferred value still eventually updates, so heavy computations will still runâ€”just later.
âš ï¸ Works best when paired with **suspense, transitions, or memoization**.

---

## 9. **Real-World Use Cases**

-   **Live search bar** â†’ user types instantly, list filters later.
-   **Complex charts/dashboards** â†’ UI controls update fast, charts render after.
-   **Form validation** â†’ show typing instantly, run heavy validations with deferred value.

---

ğŸ‘‰ In short:
`useDeferredValue` = lets React **delay updating a value** so urgent interactions stay smooth, especially when rendering heavy lists or running expensive computations.
