# Chapter 1: Types

## 1. JavaScript and Types

-   Many developers say JS is a “typeless” or “dynamic” language.
-   But **ECMAScript specification** clearly defines _types_:

    -   Every value has an associated type.
    -   Types are classified into **ECMAScript Language Types** and **Specification Types**.
    -   Language types are the ones we use directly:
        **Undefined, Null, Boolean, String, Number, Object, Symbol (ES6+).**

Definition (Kyle Simpson):
A **type** is an intrinsic, built-in set of characteristics that defines the behavior of a value and distinguishes it from other values.

Example:

```js
42; // number type → numeric operations
("42"); // string type → textual operations
```

Even though they “look” similar, they are different **types** with different behavior.

---

## 2. Why Types Matter

-   Understanding types is critical for:

    -   Proper **type conversions** (coercion).
    -   Avoiding bugs caused by **unexpected coercion**.

-   **Coercion** can be explicit and safe, or implicit and confusing.
-   Many developers avoid coercion because of confusion, but when understood, coercion is **powerful** and **useful**.

---

## 3. Built-in Types

JavaScript defines **7 types**:

1. **null**
2. **undefined**
3. **boolean**
4. **number**
5. **string**
6. **object**
7. **symbol** (added in ES6)

### Primitives

-   All except **object** are **primitives**.
-   Primitive types are immutable and represent single values.

### `typeof` operator

Returns the type of a value as a string:

```js
typeof undefined; // "undefined"
typeof true; // "boolean"
typeof 42; // "number"
typeof "42"; // "string"
typeof { life: 42 }; // "object"
typeof Symbol(); // "symbol"
```

Special Cases:

-   `typeof null === "object"` → long-standing JS bug.

-   Functions:

    ```js
    typeof function () {} === "function"; // true
    ```

    But functions are actually **callable objects** (a subtype of object with an internal `[[Call]]` property).

-   Arrays:

    ```js
    typeof [1, 2, 3] === "object"; // true
    ```

    Arrays are also objects, but with numeric indexing and special behaviors like `.length`.

---

## 4. Values as Types

-   In JS, **values have types, not variables**.
    A variable can hold any value at any time.

```js
let a = 42;
typeof a; // "number"
a = true;
typeof a; // "boolean"
```

-   Type of a value is intrinsic and cannot change.

-   Variables are flexible — they can be reassigned to values of different types.

-   Example of coercion:

    ```js
    let num = 42;
    let str = String(num); // "42"
    ```

    Here we created a new string from the number — types don’t “change,” values do.

---

## 5. `undefined` vs **Undeclared**

-   **undefined**:

    -   A variable that has been declared but not assigned a value.

    ```js
    var a;
    console.log(a); // undefined
    ```

-   **undeclared**:

    -   A variable that has never been declared in scope.

    ```js
    console.log(b); // ReferenceError: b is not defined
    ```

Confusion: Error message says _“b is not defined”_, which is often mistaken as “undefined.”

---

## 6. `typeof` and Safety Guard

-   `typeof` has a **special behavior** with undeclared variables:

    ```js
    var a;
    typeof a; // "undefined"
    typeof b; // "undefined" (even though b is undeclared)
    ```

-   This prevents runtime errors and is useful for checking existence:

    ```js
    if (typeof DEBUG !== "undefined") {
        console.log("Debugging is on");
    }
    ```

-   Safer than directly accessing undeclared variables.

---

## 7. Usage Patterns

-   **Global object property checks** (browser: `window`):

    ```js
    if (window.DEBUG) { ... }
    if (!window.atob) { ... }
    ```

    -   Avoids ReferenceError but may not work across all environments (Node.js doesn’t use `window`).

-   **Polyfills**:

    ```js
    if (typeof atob === "undefined") {
        atob = function () {
            /* custom implementation */
        };
    }
    ```

-   **Utility pattern**:

    ```js
    function doSomethingCool() {
        var helper =
            typeof FeatureXYZ !== "undefined"
                ? FeatureXYZ
                : function () {
                      /* default */
                  };

        var val = helper();
    }
    ```

-   **Dependency Injection alternative**:

    ```js
    function doSomethingCool(FeatureXYZ) {
        var helper =
            FeatureXYZ ||
            function () {
                /* default */
            };
        var val = helper();
    }
    ```

---

## 8. Chapter 1 Review

-   JS has **7 built-in types**: null, undefined, boolean, number, string, object, symbol.
-   **Variables don’t have types; values do.**
-   **undefined** ≠ **undeclared**:

    -   `undefined`: declared but no value.
    -   `undeclared`: not declared at all.

-   `typeof` returns a string identifying value type.
-   Special safety guard: `typeof undeclaredVar` doesn’t throw, returns `"undefined"`.
-   Understanding types is key to mastering coercion and avoiding confusion.
