# Chapter 6: API Additions

ES6 introduces many **new static methods, prototype methods, and constants** on built-in objects. These additions help with **array handling, object manipulation, math operations, number safety, and string processing**.

---

## 1. Array Enhancements

### `Array.of(..)`

-   Fixes the **Array constructor gotcha**.
-   `Array(3)` → creates an empty array of length 3.
-   `Array.of(3)` → creates an array `[3]`.

```js
Array(3); // [ , , , ] (3 empty slots)
Array.of(3); // [3]
Array.of(1, 2, 3); // [1,2,3]
```

-   Useful in subclassing arrays (`MyCoolArray.of()`).

---

### `Array.from(..)`

-   Converts **array-like objects** or **iterables** into real arrays.
-   Handles `length`-based objects or objects with an iterator.

```js
Array.from("hello"); // ["h","e","l","l","o"]

let arrLike = { 0: "a", 1: "b", length: 2 };
Array.from(arrLike); // ["a","b"]

let set = new Set([1, 2, 3]);
Array.from(set); // [1,2,3]
```

-   Can apply a **mapping function**:

```js
Array.from([1, 2, 3], (x) => x * 2); // [2,4,6]
```

-   Always **fills missing slots with `undefined`** (no “empty slots”).

---

### `Array.prototype.copyWithin(..)`

-   Copies part of the array within itself.

```js
[1, 2, 3, 4, 5].copyWithin(3, 0);
// [1,2,3,1,2]
```

-   Arguments: `(target, start, end?)`.
-   Works for **normal arrays and Typed Arrays**.

---

### `Array.prototype.fill(..)`

-   Fills all or part of an array with a value.

```js
Array(4).fill(0); // [0,0,0,0]
[1, 2, 3, 4].fill("x", 1, 3); // [1,"x","x",4]
```

---

### `Array.prototype.find(..)`

-   Finds the **first matching value** using a callback.

```js
[1, 2, 3, 4].find((x) => x > 2); // 3
```

---

### `Array.prototype.findIndex(..)`

-   Like `find(..)` but returns the **index**.

```js
[1, 2, 3, 4].findIndex((x) => x > 2); // 2
```

---

### Iterators: `entries()`, `keys()`, `values()`

-   Provide different iteration views:

```js
let arr = ["a", "b", "c"];
[...arr.keys()]; // [0,1,2]
[...arr.values()]; // ["a","b","c"]
[...arr.entries()]; // [[0,"a"], [1,"b"], [2,"c"]]
```

---

## 2. Object Enhancements

### `Object.is(..)`

-   Like `===` but fixes edge cases:

    -   `Object.is(NaN, NaN); // true`
    -   `Object.is(+0, -0);   // false`

---

### `Object.getOwnPropertySymbols(..)`

-   Retrieves **symbol properties** of an object.

```js
let o = { [Symbol("id")]: 123 };
Object.getOwnPropertySymbols(o); // [Symbol(id)]
```

---

### `Object.setPrototypeOf(..)`

-   Sets an object’s prototype.

```js
let a = {
    greet() {
        console.log("hi");
    }
};
let b = {};
Object.setPrototypeOf(b, a);
b.greet(); // "hi"
```

---

### `Object.assign(..)`

-   Copies properties from source objects into a target.

```js
let target = {};
Object.assign(target, { a: 1 }, { b: 2 });
target; // {a:1, b:2}
```

-   Only copies **own enumerable properties**, not symbols by default.

---

## 3. Math Enhancements

New methods for **trigonometry, arithmetic, and meta operations**:

### Trigonometry

-   `Math.sinh(..)`, `Math.cosh(..)`, `Math.tanh(..)`
-   `Math.asinh(..)`, `Math.acosh(..)`, `Math.atanh(..)`
-   `Math.hypot(..)` → generalized Pythagorean theorem.

### Arithmetic

-   `Math.cbrt(..)` → cube root.
-   `Math.clz32(..)` → count leading zeros (32-bit).
-   `Math.expm1(..)` → `exp(x) - 1`.
-   `Math.log2(..)`, `Math.log10(..)`, `Math.log1p(..)`.
-   `Math.imul(..)` → 32-bit integer multiplication.

### Meta

-   `Math.sign(..)` → `-1`, `0`, `1`, or `NaN`.
-   `Math.trunc(..)` → strips decimals.
-   `Math.fround(..)` → rounds to 32-bit float.

---

## 4. Number Enhancements

### Static Properties

-   `Number.EPSILON` → smallest gap (≈ 2^-52).
-   `Number.MAX_SAFE_INTEGER` → `2^53 - 1`.
-   `Number.MIN_SAFE_INTEGER` → `-(2^53 - 1)`.

---

### `Number.isNaN(..)`

-   Safer than global `isNaN(..)` (no coercion).

```js
Number.isNaN("NaN"); // false
isNaN("NaN"); // true
```

---

### `Number.isFinite(..)`

-   Checks finiteness **without coercion**.

```js
Number.isFinite("42"); // false
isFinite("42"); // true
```

---

### Integer Functions

-   `Number.isInteger(..)` → checks if value is integer.
-   `Number.isSafeInteger(..)` → integer within safe range.

---

## 5. String Enhancements

### Unicode Functions

-   `String.fromCodePoint(..)`
-   `str.codePointAt(..)`
-   `str.normalize(..)`

---

### `String.raw(..)`

-   Gets **raw string content** from template literals.

```js
String.raw`\n`; // "\n" (not newline, just backslash+n)
```

---

### `String.prototype.repeat(..)`

-   Repeats string `n` times.

```js
"hi".repeat(3); // "hihihi"
```

---

### String Inspection

-   `startsWith(..)`
-   `endsWith(..)`
-   `includes(..)`

```js
"hello".startsWith("he"); // true
"hello".endsWith("lo"); // true
"hello".includes("ell"); // true
```

---

## 6. Review

-   **Array**: `of`, `from`, `copyWithin`, `fill`, `find`, `findIndex`, iterators.
-   **Object**: `is`, `assign`, `setPrototypeOf`, `getOwnPropertySymbols`.
-   **Math**: new trig, arithmetic, meta methods.
-   **Number**: EPSILON, safe integers, `isNaN`, `isFinite`, `isInteger`.
-   **String**: Unicode helpers, `raw`, `repeat`, search functions.

---
