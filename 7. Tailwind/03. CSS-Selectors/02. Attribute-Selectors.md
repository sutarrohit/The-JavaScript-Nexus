# Attribute selectors in Tailwind

> General pattern: put a custom selector inside square brackets as an _arbitrary variant_.
> Syntax: `[...] :utility`
> Example: `[&[type='text']]:border-blue-500` applies `border-blue-500` to the element(s) selected by `&[type='text']`.

`&` means “the element that has this class”. When you need to target other elements relative to that element, use `&` as the base (e.g. descendant `[&_input]` or child `[&>p]`).

---

## 1) `[attr]` — attribute exists

**Meaning (CSS):** element has the attribute (any value).

**Tailwind:**

```html
<input class="[&[disabled]]:opacity-50" disabled />
<!-- disabled inputs become semi-transparent -->
```

**Notes:** Great for `disabled`, `required`, `hidden`, `readonly`, `data-*` presence.

---

## 2) `[attr="value"]` — exact match

**Meaning (CSS):** attribute value equals exactly.

**Tailwind:**

```html
<input class="[&[type='text']]:border-blue-500" type="text" />
```

**Case-insensitive**: add `i` after the value (CSS feature) — include it inside the selector:

```html
<input class="[&[lang='en' i]]:text-blue-700" lang="EN" />
```

---

## 3) `[attr~="value"]` — contains word (space-separated)

**Meaning:** attribute contains the whole word (useful for `class` or space-separated tokens).

**Tailwind:**

```html
<div class="[&[class~='card']]:shadow-lg card"></div>
<!-- any element with class list containing 'card' gets shadow-lg -->
```

**Use case:** styling elements that have a token in a space-separated attribute like `class` or `rel`.

---

## 4) `[attr|="value"]` — starts with value or value-

**Meaning:** attribute equals `value` or begins with `value-` (commonly used for `lang`).

**Tailwind:**

```html
<p class="[&[lang|='en']]:text-slate-800" lang="en-US">...</p>
```

---

## 5) `[attr^="value"]` — starts with

**Meaning:** attribute value begins with substring.

**Tailwind:**

```html
<a class="[&[href^='https']]:underline" href="https://example.com">Secure</a>
```

**Use case:** secure links, assets with path prefixes, `data-` patterns.

---

## 6) `[attr$="value"]` — ends with

**Meaning:** attribute ends with substring.

**Tailwind:**

```html
<img class="[&[src$='.png']]:rounded-lg" src="logo.png" />
```

**Use case:** file extensions, anchor fragments, queryless paths.

---

## 7) `[attr*="value"]` — contains substring

**Meaning:** attribute contains substring anywhere.

**Tailwind:**

```html
<a class="[&[href*='example']]:text-purple-600" href="https://myexample.com">...</a>
```

**Use case:** partial matches in href, data strings, UIDs.

---

## Combining multiple attribute conditions

Chain them inside the same arbitrary variant:

```html
<input class="[&[type='text'][disabled]]:bg-gray-100" type="text" disabled />
```

This targets inputs with `type="text"` **and** `disabled`.

---

## Using case-insensitive flag (`i`) and exact `s` flag

CSS allows `[attr="value" i]` for case-insensitive match. Use it in Tailwind the same way:

```html
<div class="[&[title='hello' i]]:uppercase" title="HELLO">Hello</div>
```

_(There’s also a `s` modifier for U+0020 space-semantics in newer specs; rarely used.)_

---

## Responsive & state variants with attribute selectors

Arbitrary variants combine with normal Tailwind variants (`sm:`, `md:`, `hover:`, `focus:`, `dark:`, etc.). Order them as you would normally:

```html
<!-- responsive -->
md:[&[type='search']]:text-lg

<!-- hover on attribute-targeted element -->
[&[data-state='open']]:bg-white hover:[&[data-state='open']]:bg-gray-50

<!-- dark mode + attribute -->
dark:[&[data-variant='primary']]:text-white
```

Examples:

```html
<input class="md:[&[type='search']]:text-lg" type="search" />

<button class="[&[aria-pressed='true']]:bg-blue-600 hover:[&[aria-pressed='true']]:bg-blue-700">...</button>
```

---

## Targeting other elements relative to the element with the class

You can place attribute selectors together with combinators.

-   **Descendant (` `)**:

    ```html
    <div class="[&_input[type='checkbox']]:mr-2">
        <input type="checkbox" />
    </div>
    ```

    This applies margin to `input[type='checkbox']` descendants of the div.

-   **Child (`>`)**:

    ```html
    <div class="[&>a[href^='https']]:font-semibold">
        <a href="https://...">Link</a>
    </div>
    ```

-   **Sibling selectors (`+`, `~`)** also work:

    ```html
    <h3 class="[&+p]:mt-2">Heading</h3>
    <!-- p immediately after h3 gets mt-2 -->

    <h3 class="[&~p]:text-sm">Heading</h3>
    <!-- all p siblings after h3 get text-sm -->
    ```

Use `&` to anchor the arbitrary selector to the element which has the class.

---

## Working with `data-*` attributes (recommended for JS-driven UI)

`data-*` attributes are perfect for state-driven styling:

```html
<button class="[&[data-state='open']]:bg-gray-100" data-state="open">Open</button>
```

For boolean-like flags:

```html
<div class="[&[data-disabled]]:opacity-50" data-disabled>...</div>
```

---

## Accessibility attributes (`aria-*`)

You can style by ARIA attributes:

```html
<button class="[&[aria-expanded='true']]:rotate-180" aria-expanded="true">▾</button>
```

---

## Tips, gotchas & best practices

-   **Use single quotes inside arbitrary variants** to avoid conflicts with HTML attribute double quotes:
    `class="[&[href^='https']]:underline"`
-   **Escape only if needed**: sometimes attribute values with special characters require escaping — but common cases (`https`, `.png`, simple tokens) work without extra escaping.
-   **Keep selectors readable**: long complex selectors can be harder to maintain than small utility classes. Prefer data attributes + short variants for component state.
-   **Performance**: attribute selectors are fine, but avoid extremely complex or deeply chained selectors if you expect huge DOMs — keep selectors scoped to components.
-   **Prefer `data-*` for JS state**: `data-state`, `data-open`, `data-variant` are explicit and clear for styling.
-   **Case-insensitive matching**: use `[attr='value' i]` when attribute casing is unpredictable (e.g., `lang`).
-   **Testing**: because arbitrary variants are literal strings passed into generated CSS, test the compiled output or the preview in dev to ensure no unexpected escaping errors.
-   **Browser support**: attribute selectors are widely supported; the case-insensitive flag (`i`) is supported in modern browsers — check older-targeted environments if needed.

---

## Quick mapping cheat-sheet

| CSS selector   | Meaning                | Tailwind arbitrary variant example     |          |                         |
| -------------- | ---------------------- | -------------------------------------- | -------- | ----------------------- |
| `[attr]`       | attribute exists       | `[&[disabled]]:opacity-50`             |          |                         |
| `[attr="v"]`   | exact match            | `[&[type='text']]:border-blue-500`     |          |                         |
| `[attr~="v"]`  | contains word          | `[&[class~='card']]:shadow-lg`         |          |                         |
| `[attr         | ="v"]`                 | starts with or value-                  | `[&[lang | ='en']]:text-slate-800` |
| `[attr^="v"]`  | starts with            | `[&[href^='https']]:underline`         |          |                         |
| `[attr$="v"]`  | ends with              | `[&[src$='.png']]:rounded-lg`          |          |                         |
| `[attr*="v"]`  | contains substring     | `[&[href*='example']]:text-purple-600` |          |                         |
| `[attr='v' i]` | case-insensitive match | `[&[title='hello' i]]:uppercase`       |          |                         |

---

## Practical examples — small component patterns

### Toggle button (ARIA)

```html
<button class="[&[aria-pressed='true']]:bg-blue-600 [&[aria-pressed='true']]:text-white" aria-pressed="true">
    Toggle
</button>
```

### Search input only on medium screens

```html
<input class="md:[&[type='search']]:text-lg" type="search" />
```

### Styling links to external sites

```html
<a class="[&[href^='http']]:after:content-['_↗']" href="http://external.com">External</a>
```

_(note: pseudo-element example; ensure your Tailwind config supports arbitrary `content` utilities if needed.)_

### Data-driven card variant

```html
<div class="[&[data-variant='primary']]:bg-blue-50 [&[data-variant='secondary']]:bg-gray-50" data-variant="primary">
    ...
</div>
```
